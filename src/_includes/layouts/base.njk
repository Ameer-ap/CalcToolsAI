<!DOCTYPE html>
<html lang="en">
  <head>
    {% include "partials/head.njk" %}

    {# ✅ Breadcrumb JSON-LD for sub-pages only #}
    {% if page.url != "/" %}
      <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "BreadcrumbList",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Home",
              "item": "{{ site.url }}"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "{{ title or 'Page' }}",
              "item": "{{ site.url }}{{ page.url }}"
            }
          ]
        }
      </script>
    {% endif %}
  </head>
  <body>
    {# ✅ Skip to main content link for accessibility #}
    <a href="#main-content" class="skip-link">Skip to main content</a>

    {% include "partials/gtm-noscript.njk" %}
    {% include "partials/header.njk" %}

    <main id="main-content" role="main">
      {% if page.url == "/" %}
        {{ content | safe }}
      {% else %}
        <section class="content-section">
          <div class="container-padded page-content">
            {# ✅ Microdata breadcrumbs for visual users #}
            <nav class="breadcrumb" aria-label="Breadcrumb">
              <ol itemscope itemtype="https://schema.org/BreadcrumbList" class="breadcrumb-list">
                <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" class="breadcrumb-item">
                  <a itemprop="item" href="/" class="breadcrumb-link">
                    <span itemprop="name">Home</span>
                  </a>
                  <meta itemprop="position" content="1" />
                </li>

                <li class="breadcrumb-separator" aria-hidden="true">/</li>

                <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" class="breadcrumb-item breadcrumb-current" aria-current="page">
                  <span itemprop="name">{{ title or "Page" }}</span>
                  <meta itemprop="position" content="2" />
                </li>
              </ol>
            </nav>
            {# /Breadcrumbs #}
            {{ content | safe }}
          </div>
        </section>
      {% endif %}
    </main>

    {% include "partials/footer.njk" %}

    {% block scripts %}
      {% if page.url == "/" or page.fileSlug == "calculator" %}
        <script defer src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.4.1/math.js" crossorigin="anonymous"></script>
        <script src="/assets/js/script.js?v=1.2" defer></script>
      {% endif %}
    {% endblock %}
  </body>
</html>